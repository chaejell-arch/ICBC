# 스트림릿 Streamlit 대시보드 생성 작업지시서

## 목표
`Online Retail/eda.py` 파일을 기반으로 Streamlit 대시보드를 생성하여 온라인 소매 데이터에 대한 탐색적 데이터 분석(EDA) 결과를 상호작용 가능한 형태로 시각화합니다.

## 주요 기능 및 구성
1.  **데이터 로드 및 전처리**:
    *   `Online Retail/Online_Retail.csv` 파일을 로드하고, `eda.py` 파일에 정의된 전처리 로직을 적용합니다 (결측치 제거, 데이터 타입 변환, 취소 주문 및 0 이하 값 제거, `TotalPrice` 컬럼 생성 등).

2.  **대시보드 레이아웃**:
    *   사용자가 분석 섹션을 쉽게 탐색할 수 있도록 명확하고 직관적인 레이아웃을 구성합니다. (예: 사이드바 메뉴, 탭 또는 확장 가능한 섹션)

3.  **데이터 개요**:
    *   데이터의 기본 정보 (예: `df.head()`, `df.info()`, `df.describe()`)를 표 형태로 표시합니다.

4.  **판매 분석**:
    *   **국가별 주문 수**: 상위 10개 국가별 주문 수를 Plotly 막대 그래프로 시각화합니다.
    *   **월별 총 매출 추이**: 월별 총 매출을 Plotly 선 그래프로 시각화합니다.
    *   **시간대별 주문 수**: 시간대별 주문 수를 Plotly 막대 그래프로 시각화합니다.
    *   **요일별 주문 수**: 요일별 주문 수를 Plotly 막대 그래프로 시각화합니다.

5.  **상품 분석**:
    *   **상위 10개 판매 상품 (수량 기준)**: 가장 많이 판매된 상위 10개 상품을 Plotly 가로 막대 그래프로 시각화합니다.
    *   **상위 10개 매출 상품 (금액 기준)**: 매출액 기준 상위 10개 상품을 Plotly 가로 막대 그래프로 시각화합니다.
    *   **단가와 수량의 관계**: 단가와 수량의 관계를 Plotly 산점도로 시각화합니다. (로그 스케일 적용)

6.  **고객 분석**:
    *   **고객별 총 구매액 분포**: 고객별 총 구매액 분포를 Plotly 히스토그램으로 시각화합니다.
    *   **고객별 주문 빈도 분포**: 고객별 주문 빈도 분포를 Plotly 히스토그램으로 시각화합니다.
    *   **RFM 기반 고객 세그먼트 분포**: `eda.py`의 RFM 분석 로직을 적용하여 고객 세그먼트 분포를 Plotly 가로 막대 그래프로 시각화합니다.

7.  **ARPU 분석**:
    *   **월별 ARPU 추이**: 월별 사용자당 평균 매출(ARPU) 추이를 Plotly 선 그래프로 시각화합니다.
    *   **월별 ARPU**: 월별 ARPU를 Plotly 막대 그래프로 시각화합니다.
    *   월별 ARPU 데이터 (총 매출, 구매 고객 수, ARPU)를 표 형태로 표시합니다.

## 제약 사항
*   **시각화 라이브러리**: 모든 데이터 시각화는 `Plotly` 라이브러리만을 사용하여 구현해야 합니다. `matplotlib` 등 다른 시각화 라이브러리는 사용하지 않습니다.
*   **코드 작성 금지**: 이 작업지시서에는 코드를 직접 작성하지 않습니다. 프롬프트 형태로 기능 명세만 기술합니다.


### **1. 목표**
- `Online Retail` 데이터셋을 분석하고 시각화하는 대화형 대시보드를 Streamlit으로 구축합니다.
- `eda.py` 스크립트에서 수행된 분석을 기반으로 하며, 모든 시각화는 **Plotly** 라이브러리를 사용해야 합니다.

### **2. 핵심 기능 요구사항**

#### **가. 데이터 로딩 및 전처리**
- `Online Retail/Online_Retail.xlsx` 파일을 로드하여 데이터프레임을 생성합니다.
- `eda.py`에서 수행된 것과 동일한 전처리 단계를 적용합니다.
    - `CustomerID`가 없는 행을 제거합니다.
    - 중복된 행을 제거합니다.
    - `CustomerID`를 정수형으로, `InvoiceDate`를 datetime 형식으로 변환합니다.
    - 수량(Quantity)과 단가(UnitPrice)를 곱하여 `TotalPrice` 파생 변수를 생성합니다.

#### **나. 대시보드 레이아웃**
- Streamlit의 사이드바(`st.sidebar`)를 사용하여 각 분석 페이지로 이동할 수 있는 메뉴를 구성합니다.
- 메뉴는 "메인", "매출 분석", "고객 및 상품 분석", "사용자 행동 분석" 등의 섹션으로 구분합니다.
- 각 페이지 내에서는 `st.tabs`를 사용하여 관련 시각화 및 정보를 논리적으로 그룹화하고 분리하여 표시합니다.

#### **다. 시각화 (Plotly 사용)**
- 모든 차트는 `plotly.express` 또는 `plotly.graph_objects`를 사용하여 생성합니다. **(Matplotlib, Seaborn 사용 금지)**
- 각 시각화 아래에는 `st.dataframe`이나 `st.expander`를 사용하여 관련 데이터를 표 형태로 표시합니다.
- `eda.py`의 모든 분석 결과를 아래와 같이 Plotly 차트로 구현합니다.
    1.  **월별 총 매출**: 라인 차트
    2.  **상위 10개국 매출**: 막대 차트
    3.  **상위 10개 상품 판매량**: 수평 막대 차트
    4.  **시간대별/요일별 주문 건수**: 막대 차트
    5.  **상위 10명 고객 구매액**: 막대 차트
    6.  **월별 ARPU(가입자당 평균 매출)**: 라인 차트와 막대 차트
    7.  **평균 DAU vs MAU**: 막대 차트
    8.  **시간-요일별 주문 히트맵**: `plotly.graph_objects.Heatmap` 사용
    9.  **월단위 고객 리텐션**: `plotly.graph_objects.Heatmap` 사용. 첫 번째 열의 이름은 'Acquisition'으로 지정합니다.

#### **라. 상호작용 기능**
- 사이드바에 연도 또는 국가를 선택할 수 있는 필터(`st.selectbox` 등)를 추가하여 일부 차트의 데이터를 동적으로 필터링할 수 있는 기능을 구현합니다.
- 예를 들어, 사용자가 특정 국가를 선택하면 해당 국가의 매출 데이터만 시각화에 반영되도록 합니다.
- **데이터 검색 기능**: 사용자가 데이터프레임(`df`) 내의 `Description` 또는 `InvoiceNo` 열에서 특정 키워드를 검색하여 관련 데이터를 필터링하고 표시할 수 있도록 `st.text_input` 위젯과 함께 검색 기능을 구현합니다. 검색 결과는 별도의 테이블로 표시합니다.

### **3. 코드 및 개발 환경**
- 최종 결과물은 `Online Retail/dashboard.py` 라는 단일 파일로 작성합니다.
- 모든 차트의 제목, 축 레이블, 범례 등은 한글로 명확하게 표시합니다.
- 코드에는 각 기능과 로직을 설명하는 한글 주석을 포함합니다.
- `streamlit run Online Retail/dashboard.py` 명령어로 실행 가능해야 합니다.